<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Why 0.1 + 0.2 != 0.3? | Donna'Log</title><meta name="author" content="Donna Tang"><meta name="copyright" content="Donna Tang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="BackgroundWhen you enter the following lines in the browser console, the result is unexpected: 1230.1 + 0.2 &gt; 0.3  &#x2F;&#x2F; true0.1 + 0.2 &#x3D; 0.300000000000000040.1 * 0.1 &#x3D; 0.010000000000000002  Prerequisi">
<meta property="og:type" content="article">
<meta property="og:title" content="Why 0.1 + 0.2 !&#x3D; 0.3?">
<meta property="og:url" content="https://donnapersonal.github.io/posts/0.1+0.2/">
<meta property="og:site_name" content="Donna&#39;Log">
<meta property="og:description" content="BackgroundWhen you enter the following lines in the browser console, the result is unexpected: 1230.1 + 0.2 &gt; 0.3  &#x2F;&#x2F; true0.1 + 0.2 &#x3D; 0.300000000000000040.1 * 0.1 &#x3D; 0.010000000000000002  Prerequisi">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://github.com/donnapersonal/picx-images-hosting/raw/master/image.6m494gp9dv.webp">
<meta property="article:published_time" content="2021-05-17T01:35:51.000Z">
<meta property="article:modified_time" content="2025-10-02T21:55:14.804Z">
<meta property="article:author" content="Donna Tang">
<meta property="article:tag" content="JS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/donnapersonal/picx-images-hosting/raw/master/image.6m494gp9dv.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Why 0.1 + 0.2 != 0.3?",
  "url": "https://donnapersonal.github.io/posts/0.1+0.2/",
  "image": "https://github.com/donnapersonal/picx-images-hosting/raw/master/image.6m494gp9dv.webp",
  "datePublished": "2021-05-17T01:35:51.000Z",
  "dateModified": "2025-10-02T21:55:14.804Z",
  "author": [
    {
      "@type": "Person",
      "name": "Donna Tang",
      "url": "https://donnapersonal.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://donnapersonal.github.io/posts/0.1+0.2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":150,"languages":{"author":"Author: Donna Tang","link":"Link: ","source":"Source: Donna'Log","info":"Copyright belongs to the author. For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source."}},
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Why 0.1 + 0.2 != 0.3?',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="preconnect" href="https://jsd.012700.xyz"><link href="/self/btf.css" rel="stylesheet"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(https://oss.012700.xyz/butterfly/2024/10/index.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.JPG" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-language"></i><span> Language</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/"><i class="fa-fw fas fa-e"></i><span> English</span></a></li><li><a class="site-page child" href="/cn/"><i class="fa-fw fas fa-c"></i><span> Chinese</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Donna'Log</span></a><a class="nav-page-title" href="/"><span class="site-name">Why 0.1 + 0.2 != 0.3?</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-language"></i><span> Language</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/"><i class="fa-fw fas fa-e"></i><span> English</span></a></li><li><a class="site-page child" href="/cn/"><i class="fa-fw fas fa-c"></i><span> Chinese</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Why 0.1 + 0.2 != 0.3?<a class="post-edit-link" href="null_posts/0.1+0.2.md" title="Edit" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-05-17T01:35:51.000Z" title="Created 2021-05-16 21:35:51">2021-05-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-02T21:55:14.804Z" title="Updated 2025-10-02 17:55:14">2025-10-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Frontend/">Frontend</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Frontend/JS/">JS</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="container post-content" id="article-container"><h1 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h1><p>When you enter the following lines in the browser console, the result is unexpected:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.1</span> + <span class="number">0.2</span> &gt; <span class="number">0.3</span>  <span class="comment">// true</span></span><br><span class="line"><span class="number">0.1</span> + <span class="number">0.2</span> = <span class="number">0.30000000000000004</span></span><br><span class="line"><span class="number">0.1</span> * <span class="number">0.1</span> = <span class="number">0.010000000000000002</span></span><br></pre></td></tr></table></figure>

<h1 id="Prerequisite-Knowledge"><a href="#Prerequisite-Knowledge" class="headerlink" title="Prerequisite Knowledge"></a>Prerequisite Knowledge</h1><p>In the world of computers, everything is ultimately binary — just <code>0s</code> and <code>1s</code>. To represent common decimal numbers, a conversion process is required.</p>
<h2 id="Converting-Decimal-to-Binary"><a href="#Converting-Decimal-to-Binary" class="headerlink" title="Converting Decimal to Binary"></a>Converting Decimal to Binary</h2><p>The overall conversion process from decimal to binary is as follows:</p>
<ul>
<li><code>Integer part</code>: divide by 2 and record the remainders in reverse order.</li>
<li><code>Fractional part</code>: multiply by 2, record the integer part in order, until the fractional part becomes 0 or you reach the desired precision.</li>
</ul>
<h2 id="Converting-Binary-to-Decimal"><a href="#Converting-Binary-to-Decimal" class="headerlink" title="Converting Binary to Decimal"></a>Converting Binary to Decimal</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Example: binary 10101101.1101  </span></span><br><span class="line"><span class="comment">// Integer part: 10101101 </span></span><br><span class="line"><span class="comment">// → Evaluate from right to left:</span></span><br><span class="line"><span class="number">1</span> * <span class="number">2</span>^<span class="number">0</span> + <span class="number">0</span> * <span class="number">2</span>^<span class="number">1</span> + <span class="number">1</span> * <span class="number">2</span>^<span class="number">2</span> + <span class="number">1</span> * <span class="number">2</span>^<span class="number">3</span> + <span class="number">0</span> * <span class="number">2</span>^<span class="number">4</span> + <span class="number">1</span> * <span class="number">2</span>^<span class="number">5</span> + <span class="number">0</span> * <span class="number">2</span>^<span class="number">6</span> + <span class="number">1</span> * <span class="number">2</span>^<span class="number">7</span></span><br><span class="line">= <span class="number">1</span> + <span class="number">0</span> + <span class="number">4</span> + <span class="number">8</span> + <span class="number">0</span> + <span class="number">32</span> + <span class="number">0</span> + <span class="number">128</span></span><br><span class="line">= <span class="number">173</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Fractional part 1101 </span></span><br><span class="line"><span class="comment">// → Evaluate from left to right:</span></span><br><span class="line"><span class="number">1</span> * <span class="number">2</span>^-<span class="number">1</span> + <span class="number">1</span> * <span class="number">2</span>^-<span class="number">2</span> + <span class="number">0</span> * <span class="number">2</span>^-<span class="number">3</span> + <span class="number">1</span> * <span class="number">2</span>^-<span class="number">4</span></span><br><span class="line">= <span class="number">1</span>/<span class="number">2</span> + <span class="number">1</span>/<span class="number">4</span> + <span class="number">0</span> + <span class="number">1</span>/<span class="number">16</span></span><br><span class="line">= <span class="number">13</span>/<span class="number">16</span></span><br><span class="line">= <span class="number">0.8125</span></span><br></pre></td></tr></table></figure>

<h2 id="Scientific-Notation"><a href="#Scientific-Notation" class="headerlink" title="Scientific Notation"></a>Scientific Notation</h2><p>Decimal <code>173.8125</code> in scientific notation: <code>1.738125 * 10^2</code></p>
<ul>
<li>Its binary representation: <code>10101101.1101</code> → in binary scientific notation: <code>1.01011011101 * 2^7</code></li>
</ul>
<blockquote>
<p>Note: convert <code>1.01011011101 * 2^7</code> to decimal:</p>
<ul>
<li>Convert <code>1.01011011101</code> to decimal → <code>1.35791015625</code></li>
<li>Multiply by <code>2^7</code> → <code>1.35791015625 * 128 = 173.8125</code></li>
</ul>
</blockquote>
<h2 id="Binary-Precision-Limits"><a href="#Binary-Precision-Limits" class="headerlink" title="Binary Precision Limits"></a>Binary Precision Limits</h2><p>An <code>n-bit</code> binary number can represent up to <code>2^n - 1</code>, that is, the <code>maximum numerical value</code> is when all <code>n</code> bits are set to <code>1</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 8-bit binary 11111111 → maximum value</span></span><br><span class="line"><span class="comment">// Two calculation methods:</span></span><br><span class="line"><span class="comment">// accumulate</span></span><br><span class="line"><span class="number">1</span>*<span class="number">2</span>^<span class="number">0</span> + <span class="number">1</span>*<span class="number">2</span>^<span class="number">1</span> + <span class="number">1</span>*<span class="number">2</span>^<span class="number">2</span> + <span class="number">1</span>*<span class="number">2</span>^<span class="number">3</span> + <span class="number">1</span>*<span class="number">2</span>^<span class="number">4</span> + <span class="number">1</span>*<span class="number">2</span>^<span class="number">5</span> + <span class="number">1</span>*<span class="number">2</span>^<span class="number">6</span> + <span class="number">1</span>*<span class="number">2</span>^<span class="number">7</span> = <span class="number">127</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// or directly: 2^n - 1</span></span><br><span class="line"><span class="number">2</span>^<span class="number">8</span> - <span class="number">1</span> = <span class="number">127</span></span><br></pre></td></tr></table></figure>

<h2 id="IEEE-754-Double-Precision-64-bit"><a href="#IEEE-754-Double-Precision-64-bit" class="headerlink" title="IEEE 754 Double Precision (64-bit)"></a>IEEE 754 Double Precision (64-bit)</h2><p><code>JavaScript</code> only has one numeric type: <code>Number</code>, which strictly follows the <code>IEEE 754 double-precision floating-point standard (64-bit)</code> defined by the ECMAScript specification.</p>
<p>The floating-point number representation has the following characteristics:</p>
<ul>
<li><code>Floating-point numbers</code> can represent a much wider range of values than integers of the same bit length.</li>
<li>Floating-point numbers <strong>cannot precisely represent every value</strong> within their representable range, whereas <strong>signed and unsigned integers</strong> can precisely represent every value within their range.</li>
<li>Floating-point numbers can only precisely represent values of the form <code>m * 2^e</code>.<ul>
<li>When the <code>biased-exponent = 2^e - 1 - 1</code>, the floating-point number can precisely represent every integer within that range.</li>
<li>When the <code>biased-exponent != 2^e - 1 - 1</code>, the floating-point number cannot precisely represent every integer within that range.</li>
</ul>
</li>
</ul>
<blockquote>
<p>Since some fractional values cannot be represented (stored) precisely, the resulting deviation becomes noticeably apparent after calculations and aggregations.</p>
</blockquote>
<p>A floating-point number is composed of three parts:</p>
<ul>
<li><p><code>sign bit</code>: <code>1 bit</code>. <code>0</code> represents a <code>positive number</code>; <code>1</code> represents a <code>negative number</code>.</p>
</li>
<li><p><code>exponent bias</code>: <code>11 bits</code>, used to represent the exponent. </p>
<ul>
<li>In binary scientific notation, it indicates the power of <code>2</code>, i.e., how many positions to shift.</li>
<li>Since both positive and negative exponents are needed, a bias system is used: the actual exponent is offset by <code>+1023</code>. So the representable exponent range is <code>[-1023 ~ 1024]</code>.</li>
<li>For example, <code>-1023</code> corresponds to all <code>0s</code>, and <code>1024</code> corresponds to all <code>1s</code>.</li>
</ul>
</li>
<li><p><code>fraction</code>: Represents the precision (the fractional part), occupying <code>52 bits</code>.</p>
<ul>
<li>Note: Due to the <strong>leading <code>1</code> before the decimal point</strong> (which is implied and not stored),<br>the actual precision is <code>52 + 1 = 53 bits</code>.</li>
</ul>
</li>
</ul>
<p>Therefore, a JavaScript number in binary should follow this structure:</p>
<p><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/IEEE754_1.sz2hldnc5.webp" alt="IEEE 754 floating-point number - three parts 1"></p>
<p><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/IEEE754_2.70aghr9ega.webp" alt="IEEE 754 floating-point number - three parts 2"></p>
<blockquote>
<p>A floating-point number (Value) can actually be represented as: <code>value = sign × exponent × fraction</code>.</p>
</blockquote>
<p><strong>The conversion from decimal to the IEEE 754 standard mainly involves 3 key steps:</strong></p>
<ul>
<li>Convert the decimal number to binary representation.</li>
<li>Express the binary number in <code>scientific notation</code>.</li>
<li>Convert the <code>scientific notation binary</code> into the <code>IEEE 754 standard format</code>.</li>
</ul>
<p>For example: The conversion result of decimal <code>0.1</code> is as follows</p>
<ul>
<li><p><strong>Convert 0.1 to binary</strong>: <code>0.00011001100110011001100110011001100110011001100110011001</code> (with repeating <code>1001</code>)</p>
</li>
<li><p><strong>Convert this binary into scientific notation:</strong> <code>2^-4 * 1.1001100110011001100110011001100110011001100110011</code> (infinite repeating <code>1001</code>)</p>
</li>
<li><p>From the scientific notation, we get:</p>
<ul>
<li><code>sign = 0</code></li>
<li><code>exponent = -4</code></li>
<li><code>-4 + 1023</code> (bias for 64-bit IEEE 754) &#x3D; <code>1019</code></li>
<li>Convert <code>1019</code> to an <code>11-bit</code> binary: <code>01111111011</code></li>
</ul>
</li>
<li><p>The fraction is the fractional part of the scientific notation: <code>1001100110011001100110011001100110011001100110011010</code></p>
<ul>
<li>The fraction can be at most <code>52 bits</code> long. If it’s shorter, pad with <code>0s</code>.</li>
<li>Here, it&#39;s longer than <code>52 bits</code>, so it’s truncated.</li>
<li>Since the <code>53rd bit</code> is <code>1</code>, rounding up occurs.</li>
<li>The leftmost <code>1</code> before the decimal is implicit and not stored, but it will be automatically restored when converting back.</li>
</ul>
</li>
<li><p>Final binary representation of 0.1 stored in the computer: <code>0 01111111011 1001100110011001100110011001100110011001100110011010</code></p>
</li>
</ul>
<p><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/IEEE754_3.9rjiptviip.webp" alt="The conversion result of decimal 0.1"></p>
<p>As shown in step <code>4</code> above, the value <code>0.1</code> gets truncated during storage, because the computer can store at most <code>52</code> bits.</p>
<p>This leads to a <strong>precision error</strong>, so when converting back from binary to decimal, the result is no longer exactly the original value.</p>
<blockquote>
<ul>
<li>For a decimal number to be exactly representable as a <strong>finite binary fraction</strong>, its last digit must be divisible by <code>5</code>, because only numbers that can be written as <code>0.5 * 2</code> can be exactly represented.</li>
<li>i.e., <strong>binary can only exactly represent decimal fractions whose denominator is a power of 2</strong>.</li>
<li>Therefore, among the one-digit decimals <code>0.1 ~ 0.9</code>, only <code>0.5</code> can be precisely represented. The others will lose precision during conversion to binary.</li>
</ul>
</blockquote>
<p><strong>Steps to convert the binary into decimal:</strong></p>
<ul>
<li>The <code>sign</code> bit is <code>0</code>, which means the number is positive <code>(+)</code>.</li>
<li>The <code>exponent</code> field (<code>exponent</code>) is <code>01111111011</code>, which converts to decimal <code>1019</code>. Then we subtract the fixed bias value <code>1023</code>, resulting in a final exponent of <code>-4</code>.</li>
<li>The fraction part (<code>significand</code>) is <code>1001100110011001100110011001100110011001100110011010</code>. Since the leading <code>1</code> to the left of the decimal point is omitted in storage, we need to add it back, giving:<br><code>1.1001100110011001100110011001100110011001100110011010</code>.</li>
<li>Finally, we plug these values into the formula: <code>value = + 2^-4 × 1.1001100110011001100110011001100110011001100110011010</code></li>
<li>Converting this binary representation into decimal gives:<br><code>0.100000000000000005551115123126</code>.</li>
</ul>
<p>So the detailed formula can be written as follows, where <code>e</code> represents the unbiased exponent:</p>
<p><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/IEEE754_4.6f0svgey6c.webp" alt="formula 1"></p>
<p>When calculating the exponent bias, a fixed offset value of <code>1023</code> is added. The formula for this bias value is as follows:</p>
<p><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/IEEE754_5.esmqq5cig.webp" alt="formula 2"></p>
<p>Here, <code>e</code> represents the number of bits used to store the exponent. In a <code>64-bit</code> double-precision binary format, the exponent length <code>e</code> is <code>11</code>. From this, the fixed bias value is calculated to be <code>1023</code>.</p>
<p>Using the method of representing the actual exponent (for example, <code>-4</code> in the previous case) plus a fixed bias allows the exponent of a floating-point number to be stored as an unsigned integer of length <code>e</code>. </p>
<ul>
<li>The advantage of this approach: All exponent values can be represented without needing a separate <code>sign</code> bit, and comparing the magnitudes of two floating-point numbers becomes easier, since the exponents can be compared directly in lexicographic (dictionary) order.</li>
</ul>
<blockquote>
<p>The actual exponent can be either positive or negative. </p>
<ul>
<li>If we were to represent it in two’s complement form, one bit among the <code>11</code> would need to be used as a sign bit. </li>
<li>However, this would cause complications, as the overall <code>sign</code> bit of the floating-point format together with the <code>sign</code> bit of the exponent would make direct magnitude comparison difficult. </li>
<li>Therefore, this biasing approach is adopted. In Chinese, this biased exponent is referred to as “阶码” (exponent code).</li>
</ul>
</blockquote>
<p>In <code>64-bit</code> double-precision binary format, the raw exponent range would originally be <code>-1023 ~ +1023</code> (<code>2^10 - 1</code>, with the <code>11-th</code> bit acting as a <code>sign</code> bit)</p>
<ul>
<li>By adding a fixed bias of <code>1023</code>, the stored exponent (biased exponent) range becomes <code>0 ~ 2046</code>. </li>
<li>This way, all stored exponents are positive numbers, and we can use all 11 bits directly to represent the biased exponent. Thus, the final stored exponent range is <code>0 ~ 2^11 - 1 = 2047</code>.</li>
</ul>
<p>When converting back to decimal, in order to recover the actual exponent value, the bias of <code>1023</code> must be subtracted from the stored exponent. </p>
<ul>
<li>The effective range of the actual exponent before biasing is therefore <code>-1023 ~ 1024</code>, where <code>-1023</code> is reserved to represent <code>0</code>, and <code>1024</code> is reserved to represent infinity. - Excluding these two special cases, the normal exponent range is <code>-1022 ~ +1023</code>.</li>
</ul>
<p>The previous formula can be further divided into two cases, resulting in two separate formulas:</p>
<ul>
<li><p>When the biased exponent is not <code>0</code>, the following formula is used:<br><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/IEEE754_6.45hsbyu7r4.webp" alt="formula 3"></p>
</li>
<li><p>When the biased exponent is <code>0</code>, the following formula is used:<br><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/IEEE754_7.7pevaj742.webp" alt="formula 4"></p>
</li>
</ul>
<table>
<thead>
<tr>
<th>sign</th>
<th>e (biased exponent &#x3D; actual value + bias 1023)</th>
<th>fraction</th>
<th>calculation process</th>
<th>Value in JS</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>11111111110 (1023+1023)</td>
<td>1111111111111111111111111111111111111111111111111111</td>
<td>(-1)^0 × 2^1024 &#x3D; 1.7976931348623157e+308</td>
<td>Number.MAX_VALUE</td>
</tr>
<tr>
<td>0</td>
<td>00000000000 (-1023+1023)</td>
<td>0000000000000000000000000000000000000000000000000001</td>
<td>(-1)^0 × 2^-52 × 2^-1022 &#x3D; 5e-324</td>
<td>Number.MIN_VALUE (the smallest positive number)</td>
</tr>
<tr>
<td>0</td>
<td>10000110011 (52+1023)</td>
<td>1111111111111111111111111111111111111111111111111111</td>
<td>(-1)^0 × 2^53 &#x3D; 9007199254740991</td>
<td>Number.MAX_SAFE_INTEGER</td>
</tr>
<tr>
<td>1</td>
<td>10000110011 (52+1023)</td>
<td>1111111111111111111111111111111111111111111111111111</td>
<td>(-1)^1 × 2^53 &#x3D; -9007199254740991</td>
<td>Number.MIN_SAFE_INTEGER</td>
</tr>
<tr>
<td>0</td>
<td>11111111111 (1024+1023)</td>
<td>0000000000000000000000000000000000000000000000000000</td>
<td>(-1)^0 × 1 × 2^1024</td>
<td>Infinity (positive infinity)</td>
</tr>
<tr>
<td>1</td>
<td>11111111111 (1024+1023)</td>
<td>0000000000000000000000000000000000000000000000000000</td>
<td>(-1)^1 × 1 × 2^1024</td>
<td>-Infinity (negative infinity)</td>
</tr>
<tr>
<td>0</td>
<td>00000000000</td>
<td>0000000000000000000000000000000000000000000000000000</td>
<td>(-1)^0 × 0 × 2^-1022</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>00000000000</td>
<td>0000000000000000000000000000000000000000000000000000</td>
<td>(-1)^1 × 0 × 2^-1022</td>
<td>-0</td>
</tr>
</tbody></table>
<blockquote>
<p>In the calculation process, one step was omitted. Let’s take the first row as an example to see how <code>2^1024</code> comes about:</p>
<ul>
<li>1.(52 1s) × 2^(2046 - 1023) &#x3D; 1.(52 1s) × 2^1023 &#x3D; (53 1s) × 2^(1023-52) &#x3D; 53-bit binary number in decimal &#x3D; <code>(2^53 - 1) × 2^971</code> </li>
<li>Another way is to <code>directly convert 1.fraction into decimal and then multiply it by the exponent part</code>. For example: <code>1.(52 1s) × 2^(2046 - 1023) = 1.9999999999999998 * 2^1023</code></li>
</ul>
</blockquote>
<p><strong>The Large Number Crisis — Why is 2^53 - 1 the Maximum Safe Integer? What happens if it gets larger?</strong></p>
<p><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/IEEE754_8.esmqq5ck7.webp" alt="example"></p>
<p>Let’s use <code>2^53</code> to illustrate why <code>2^53 - 1</code> is the maximum safe integer, and what “safe” means here:</p>
<ul>
<li><p>2^53 in binary → 100000000000000000000000000000000000000000000000000000 (53 zeros)</p>
<ul>
<li>Converted to scientific notation → 1.00000000000000000000000000000000000000000000000000000 (53 zeros) × 2^53</li>
<li>Stored in the computer → since the mantissa (fraction) only has <code>52</code> bits, the trailing zeros are truncated, so only <code>52</code> zeros can be stored.</li>
</ul>
</li>
<li><p>2^53 + 1 in binary → 100000000000000000000000000000000000000000000000000001 (52 zeros)</p>
<ul>
<li>Converted to scientific notation → 1.00000000000000000000000000000000000000000000000000001 (52 zeros) × 2^53</li>
<li>Stored in the computer → since the mantissa only has 52 bits, the trailing 1 is truncated, leaving only 52 zeros.</li>
</ul>
</li>
</ul>
<p>It can be seen that <code>2^53</code> and <code>2^53 + 1</code> have the same fraction part and exponent part when stored in the computer, so two different numbers end up being stored in exactly the same way. Once numbers exceed this safe value, precision loss may occur, making them highly unsafe. That’s why <code>2^53 - 1</code> is the maximum safe integer in JavaScript.</p>
<p>Since decimals can also suffer from precision loss in computers, <strong>why does <code>num = 0.1</code> still give us <code>0.1</code>?</strong></p>
<p><code>Number.toPrecision()</code> is similar to <code>toFixed</code> in that it specifies how many significant digits to keep. As we know, <code>0.1</code> actually loses precision when stored in binary, because its binary expansion is infinite repeating. The reason why writing <code>0.1</code> in JavaScript still gives us <code>0.1</code> is because JavaScript applies formatting&#x2F;rounding internally.</p>
<p><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/IEEE754_9.99th18u50e.webp" alt="Number.toPrecision()"></p>
<p>From the figure above, when we keep <code>25</code> significant digits for <code>0.1</code>, the result is no longer exactly <code>0.1</code>. This shows that JavaScript is by <code>default truncating/rounding the representation</code>.</p>
<p>This raises the question: <strong>According to what rules does double-precision floating-point perform truncation?</strong> The answer can be found in the English <a href="https://link.zhihu.com/?target=https://en.wikipedia.org/wiki/Double-precision_floating-point_format">Wikipedia</a> article on double precision.</p>
<ul>
<li>If the decimal value has fewer than <code>15</code> significant digits, then the stored value and the displayed value remain the same in decimal; JavaScript does not truncate.</li>
<li>If the decimal value has at least <code>17</code> significant digits, since the mantissa (precision) can only store <code>53</code> binary bits, the value is truncated to fit those <code>53</code> bits. After truncation, the stored binary is used for recalculation, which may give a slightly different decimal.</li>
</ul>
<p>For example, <code>0.1</code> and <code>0.10000000000000001</code> (17 significant digits) are actually equal in JavaScript, because both are stored in exactly the same double-precision binary format. The second value is truncated during conversion, so it ends up being stored identically to <code>0.1</code>.</p>
<p><strong>为什么 例如 1.335.toFixed(2) 得到的是 1.33？</strong></p>
<p><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/IEEE754_10.41y6e9152c.webp" alt="1.335.toPrecision"></p>
<ul>
<li>When <code>1.335</code> is stored as a number, its double-precision floating-point representation is actually <code>1.335</code>. As shown in the figure below, although the representation is truncated after the <code>53rd</code> bit during storage, when this double-precision value is converted back to decimal, the result is still exactly <code>1.335</code>.</li>
</ul>
<p><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/IEEE754_11.51e9rf3w8k.webp" alt="double-precision floating-point representation"></p>
<ul>
<li>Why can calling <code>toPrecision</code> still show the value of <code>1.335</code> before truncation?<ul>
<li>First, the stored <code>1.335</code> is in <code>Number</code> format, and <code>Number</code> is subject to the maximum bit-length limitation of double-precision floating-point, so <code>1.335</code> is truncated when stored.</li>
<li>However, when you call <code>toPrecision(),</code> the value is represented as a <code>string</code>. A string can represent values of any length without restriction, so it can display the value as if it were before truncation.</li>
<li>When this pre-truncation string value is converted back into a Number, the limitation of double-precision storage applies again, and the number is truncated once more.</li>
</ul>
</li>
</ul>
<h1 id="0-1-0-2-0-3-true-Analysis"><a href="#0-1-0-2-0-3-true-Analysis" class="headerlink" title="0.1 + 0.2 !&#x3D;&#x3D; 0.3 -&gt; true Analysis"></a>0.1 + 0.2 !&#x3D;&#x3D; 0.3 -&gt; true Analysis</h1><p>With all the above background in place, we can now see why <code>0.1 + 0.2 !== 0.3</code>. This issue is not unique to JavaScript — it occurs in any language or system that uses the <code>IEEE 754 double-precision floating-point representation</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 0.1</span></span><br><span class="line">e = -<span class="number">4</span>;</span><br><span class="line">m = <span class="number">1.1001100110011001100110011001100110011001100110011010</span> (<span class="number">52</span>位)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 0.2</span></span><br><span class="line">e = -<span class="number">3</span>;</span><br><span class="line">m = <span class="number">1.1001100110011001100110011001100110011001100110011010</span> (<span class="number">52</span>位)</span><br></pre></td></tr></table></figure>

<p>Here, <code>m</code> refers to the <code>52</code> fractional bits. The leading <code>1</code> before the decimal point is the hidden bit (implicit leading <code>1</code>) that we discussed earlier.</p>
<p>When adding them, the exponents must be aligned. If the exponents differ, the smaller one is shifted to the right. This is because shifting right only loses precision in the least significant bits, while shifting left could cause overflow and larger errors.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">e = -<span class="number">4</span>;</span><br><span class="line">m = <span class="number">1.1001100110011001100110011001100110011001100110011010</span> (<span class="number">52</span>位)</span><br><span class="line">+</span><br><span class="line">e = -<span class="number">3</span>; </span><br><span class="line">m = <span class="number">1.1001100110011001100110011001100110011001100110011010</span> (<span class="number">52</span>位)</span><br></pre></td></tr></table></figure>

<p>After alignment:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">e = -<span class="number">3</span>; </span><br><span class="line">m = <span class="number">0.1100110011001100110011001100110011001100110011001101</span> (<span class="number">52</span>位)</span><br><span class="line">+</span><br><span class="line">e = -<span class="number">3</span>; </span><br><span class="line">m = <span class="number">1.1001100110011001100110011001100110011001100110011010</span> (<span class="number">52</span>位)</span><br></pre></td></tr></table></figure>

<p>This gives:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">e = -<span class="number">2</span>;</span><br><span class="line">m = <span class="number">1.00110011001100110011001100110011001100110011001100111</span> (<span class="number">53</span>位)</span><br></pre></td></tr></table></figure>

<p>At this point the mantissa has overflowed beyond <code>52</code> bits, so rounding must be applied. But how should rounding be done to ensure the closest approximation?</p>
<p>For example, if we need to round <code>1.101</code> to <code>2</code> fractional bits, the possible results are <code>1.10</code> or <code>1.11</code>. Both are equally close, so which one should we pick?</p>
<ul>
<li>The rule is: <code>round to the nearest even number</code>.</li>
<li>So here we would keep <code>1.10</code>.</li>
</ul>
<p>Returning to our case, the result becomes:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">m = <span class="number">1.0011001100110011001100110011001100110011001100110100</span> （<span class="number">52</span>位）</span><br></pre></td></tr></table></figure>

<p>So the final binary value is:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span> ^ -<span class="number">2</span> * <span class="number">1.0011001100110011001100110011001100110011001100110100</span> </span><br><span class="line">= <span class="number">0.010011001100110011001100110011001100110011001100110100</span></span><br></pre></td></tr></table></figure>

<p>And when converted back to decimal, this equals: <code>0.30000000000000004</code></p>
<h1 id="Solutions"><a href="#Solutions" class="headerlink" title="Solutions"></a>Solutions</h1><h2 id="Special-Constant-Number-EPSILON"><a href="#Special-Constant-Number-EPSILON" class="headerlink" title="Special Constant: Number.EPSILON"></a>Special Constant: Number.EPSILON</h2><p>According to the specification, <strong><code>Number.EPSILON</code> represents the difference between <code>1</code> and the smallest floating-point number greater than <code>1</code></strong>. </p>
<p>Essentially, <strong><code>Number.EPSILON</code> is the smallest precision value that JavaScript can represent</strong>. If an error is smaller than this value, it can be considered negligible — effectively, no error exists.</p>
<p>To compare two numbers, check whether their absolute difference is less than <code>Number.EPSILON</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">numbersEqual</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">abs</span>(num1 - num2) &lt; <span class="title class_">Number</span>.<span class="property">EPSILON</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> a = <span class="number">0.1</span>+<span class="number">0.2</span>, b=<span class="number">0.3</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">numbersEqual</span>(a, b)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>However, considering compatibility issues: while this property is supported in <code>Chrome</code>, it is not supported in <code>Internet Explorer</code> (incompatible in <code>IE10</code>). Therefore, additional handling is needed for <code>IE</code> compatibility.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Number</span>.<span class="property">EPSILON</span>=(<span class="keyword">function</span>(<span class="params"></span>)&#123;   </span><br><span class="line">  <span class="comment">// Solve compatibility issues</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Number</span>.<span class="property">EPSILON</span> ? <span class="title class_">Number</span>.<span class="property">EPSILON</span> : <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">2</span>,-<span class="number">52</span>);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// The above is a self-calling function. When the JS file is just loaded into the memory, it will judge and return a result.</span></span><br><span class="line"><span class="comment">//if(!Number.EPSILON)&#123;</span></span><br><span class="line"><span class="comment">//   Number.EPSILON=Math.pow(2,-52);</span></span><br><span class="line"><span class="comment">//&#125; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// This code is more efficient and more beautiful</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">numbersequal</span>(<span class="params">a,b</span>)&#123; </span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">abs</span>(a-b) &lt; <span class="title class_">Number</span>.<span class="property">EPSILON</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Then judge </span></span><br><span class="line"><span class="keyword">const</span> a=<span class="number">0.1</span>+<span class="number">0.2</span>, b=<span class="number">0.3</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">numbersequal</span>(a, b)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h2 id="toFixed"><a href="#toFixed" class="headerlink" title="toFixed()"></a>toFixed()</h2><p>The <code>toFixed(num)</code> method rounds a <code>Number</code> to the specified number of decimal places.</p>
<ul>
<li><strong>Parameter description: num is required</strong>. It specifies the number of decimal places and must be a value between <code>0 ~ 20</code> (inclusive). Some implementations may support a wider range. If this parameter is omitted, it defaults to <code>0</code>.</li>
<li><strong>Important note</strong>: <ul>
<li><code>toFixed()</code> returns the string representation of the number, rounded when necessary.</li>
<li>It pads the decimal part with <code>0</code> if needed, to ensure the number has the specified number of decimal places.</li>
<li>If the number is greater than <code>1e+21</code>, the method simply calls <code>Number.prototype.toString()</code> and returns the result in <code>exponential notation</code>.</li>
</ul>
</li>
<li>Can be used to address precision issues</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseFloat</span>((expression).<span class="title function_">toFixed</span>(digits)); <span class="comment">// toFixed() precision must be between 0 and 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Examples</span></span><br><span class="line"><span class="built_in">parseFloat</span>((<span class="number">0.1</span> + <span class="number">0.2</span>).<span class="title function_">toFixed</span>(<span class="number">10</span>))   <span class="comment">// Result: 0.3</span></span><br><span class="line"><span class="built_in">parseFloat</span>((<span class="number">0.3</span> / <span class="number">0.1</span>).<span class="title function_">toFixed</span>(<span class="number">10</span>))   <span class="comment">// Result: 3</span></span><br><span class="line"><span class="built_in">parseFloat</span>((<span class="number">0.7</span> * <span class="number">180</span>).<span class="title function_">toFixed</span>(<span class="number">10</span>))   <span class="comment">// Result: 126</span></span><br><span class="line"><span class="built_in">parseFloat</span>((<span class="number">1.0</span> - <span class="number">0.9</span>).<span class="title function_">toFixed</span>(<span class="number">10</span>))   <span class="comment">// Result: 0.1</span></span><br><span class="line"><span class="built_in">parseFloat</span>((<span class="number">9.7</span> * <span class="number">100</span>).<span class="title function_">toFixed</span>(<span class="number">10</span>))   <span class="comment">// Result: 970</span></span><br><span class="line"><span class="built_in">parseFloat</span>((<span class="number">2.22</span> + <span class="number">0.1</span>).<span class="title function_">toFixed</span>(<span class="number">10</span>))  <span class="comment">// Result: 2.32</span></span><br></pre></td></tr></table></figure>

<h2 id="Native-Implementation"><a href="#Native-Implementation" class="headerlink" title="Native Implementation"></a>Native Implementation</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> num1Digits = (num1.<span class="title function_">toString</span>().<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>)[<span class="number">1</span>] || <span class="string">&#x27;&#x27;</span>).<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">const</span> num2Digits = (num2.<span class="title function_">toString</span>().<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>)[<span class="number">1</span>] || <span class="string">&#x27;&#x27;</span>).<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">const</span> baseNum = <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, <span class="title class_">Math</span>.<span class="title function_">max</span>(num1Digits, num2Digits));</span><br><span class="line">  <span class="keyword">return</span> (num1 * baseNum + num2 * baseNum) / baseNum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">roundFractional</span>(<span class="params">x, n</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">round</span>(x * <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, n)) / <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Third-Party-Libraries"><a href="#Third-Party-Libraries" class="headerlink" title="Third-Party Libraries"></a>Third-Party Libraries</h2><p>Libraries such as <code>math.js</code>, <code>D.js</code>, <code>bigNumber.js</code>, <code>decimal.js</code>, and <code>big.js</code> can also be used.</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://donnapersonal.github.io">Donna Tang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://donnapersonal.github.io/posts/0.1+0.2/">https://donnapersonal.github.io/posts/0.1+0.2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JS/">JS</a></div><div class="post-share"><div class="social-share" data-image="https://github.com/donnapersonal/picx-images-hosting/raw/master/image.6m494gp9dv.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/jsbasic-inherit/" title="JavaScript Basic - Inheritance"><img class="cover" src="https://github.com/donnapersonal/picx-images-hosting/raw/master/image.2rvii9f6z2.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">JavaScript Basic - Inheritance</div></div><div class="info-2"><div class="info-item-1">InheritanceThe purpose of prototypes is to form the prototype chain:   Reference types are all objects, and each object has a prototype.  Prototypes are also objects, and they also have their own prototypes, forming a prototype chain layer by layer.  The purpose of the prototype chain is inheritance:   When accessing an object&#39;s properties, if the property cannot be found in the object itself, the search is performed up the prototype chain layer by layer.  In other words, one object can a...</div></div></div></a><a class="pagination-related" href="/posts/jsbasic-datatype/" title="JavaScript Basic - Data Types, Operators, Type Conversion"><img class="cover" src="https://github.com/donnapersonal/picx-images-hosting/raw/master/image.7i0rgcc8cp.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">JavaScript Basic - Data Types, Operators, Type Conversion</div></div><div class="info-2"><div class="info-item-1">Primitive TypesPrimitive values are often referred to as stack data (once a &quot;room&quot; is allocated, the value inside that room cannot be modified). In JavaScript, the following primitive types exist:  number (typeof 1 === &quot;number&quot;) string (typeof &#39;&#39; === &quot;string&quot;) boolean (typeof true === &quot;boolean&quot;) null (typeof null === &quot;object&quot;) undefined (typeof undefined === &quot;undefined&quot;) symbol (typeof Symbol() === &quot;symbol&quot;) bigInt ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/+operator/" title="What are the results of JS&#39;s {} + {} and {} + []?"><img class="cover" src="https://github.com/donnapersonal/picx-images-hosting/raw/master/image.8s3omkauw3.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-16</div><div class="info-item-2">What are the results of JS&#39;s {} + {} and {} + []?</div></div><div class="info-2"><div class="info-item-1">PrefaceIn JavaScript, the + symbol is very common and can be used in the following ways:  Addition of numbers (binary operator) String concatenation (binary operator, with the highest precedence) Unary plus, which can also be extended to mean forcing the operand to be converted into a numeric type  Another common syntax element is the curly braces &#123;&#125;, which also have two frequent uses:  Object literal definition Block statements  Plus Operator +In addition to the common cases mentio...</div></div></div></a><a class="pagination-related" href="/posts/jsbasic-datatype/" title="JavaScript Basic - Data Types, Operators, Type Conversion"><img class="cover" src="https://github.com/donnapersonal/picx-images-hosting/raw/master/image.7i0rgcc8cp.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-16</div><div class="info-item-2">JavaScript Basic - Data Types, Operators, Type Conversion</div></div><div class="info-2"><div class="info-item-1">Primitive TypesPrimitive values are often referred to as stack data (once a &quot;room&quot; is allocated, the value inside that room cannot be modified). In JavaScript, the following primitive types exist:  number (typeof 1 === &quot;number&quot;) string (typeof &#39;&#39; === &quot;string&quot;) boolean (typeof true === &quot;boolean&quot;) null (typeof null === &quot;object&quot;) undefined (typeof undefined === &quot;undefined&quot;) symbol (typeof Symbol() === &quot;symbol&quot;) bigInt ...</div></div></div></a><a class="pagination-related" href="/posts/jsbasic-handwriting/" title="JavaScript Basic - High-frequency handwriting"><img class="cover" src="https://github.com/donnapersonal/picx-images-hosting/raw/master/image.9ddc96s40g.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-09</div><div class="info-item-2">JavaScript Basic - High-frequency handwriting</div></div><div class="info-2"><div class="info-item-1">Simulating Object.is()Object.is() fixes the two edge cases that === does not handle well:  It distinguishes between +0 and -0. It considers NaN equal to itself.  12345678910function objectIs(x, y) &#123;  if (x === y) &#123;    // If both x and y are 0, check for +0 vs -0.    // 1 / +0 = +Infinity, 1 / -0 = -Infinity    return x !== 0 || y !== 0 || 1 / x === 1 / y;  &#125; else &#123;    // Handle NaN: since NaN !== NaN, we check x !== x to detect NaN; y is the same.    return x !== x &amp;&a...</div></div></div></a><a class="pagination-related" href="/posts/jsbasic-inherit/" title="JavaScript Basic - Inheritance"><img class="cover" src="https://github.com/donnapersonal/picx-images-hosting/raw/master/image.2rvii9f6z2.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-08</div><div class="info-item-2">JavaScript Basic - Inheritance</div></div><div class="info-2"><div class="info-item-1">InheritanceThe purpose of prototypes is to form the prototype chain:   Reference types are all objects, and each object has a prototype.  Prototypes are also objects, and they also have their own prototypes, forming a prototype chain layer by layer.  The purpose of the prototype chain is inheritance:   When accessing an object&#39;s properties, if the property cannot be found in the object itself, the search is performed up the prototype chain layer by layer.  In other words, one object can a...</div></div></div></a><a class="pagination-related" href="/posts/jsbasic-prototype/" title="JavaScript Basic - Re-understanding constructors, prototypes, prototype chains, and inheritance"><img class="cover" src="https://github.com/donnapersonal/picx-images-hosting/raw/master/image.73ubpkycwk.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-08</div><div class="info-item-2">JavaScript Basic - Re-understanding constructors, prototypes, prototype chains, and inheritance</div></div><div class="info-2"><div class="info-item-1">Constructor FunctionsWhat is a Constructor Function?A constructor function is simply a function that provides a template for creating objects and defines their basic structure. A single constructor function can generate multiple objects, all of which share the same structure. A constructor function is still just a function, but by convention, its name starts with a capital letter. The difference between a constructor function and a regular function lies in how it is called:  When called with ...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.JPG" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Donna Tang</div><div class="author-info-description">Learn more! Think more! Do more!</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/donnapersonal"><i class="fab fa-github"></i><span>GitHub</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog! <br>Migrating from old blog!</br></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Background"><span class="toc-number">1.</span> <span class="toc-text">Background</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Prerequisite-Knowledge"><span class="toc-number">2.</span> <span class="toc-text">Prerequisite Knowledge</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Converting-Decimal-to-Binary"><span class="toc-number">2.1.</span> <span class="toc-text">Converting Decimal to Binary</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Converting-Binary-to-Decimal"><span class="toc-number">2.2.</span> <span class="toc-text">Converting Binary to Decimal</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scientific-Notation"><span class="toc-number">2.3.</span> <span class="toc-text">Scientific Notation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Binary-Precision-Limits"><span class="toc-number">2.4.</span> <span class="toc-text">Binary Precision Limits</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IEEE-754-Double-Precision-64-bit"><span class="toc-number">2.5.</span> <span class="toc-text">IEEE 754 Double Precision (64-bit)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0-1-0-2-0-3-true-Analysis"><span class="toc-number">3.</span> <span class="toc-text">0.1 + 0.2 !&#x3D;&#x3D; 0.3 -&gt; true Analysis</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Solutions"><span class="toc-number">4.</span> <span class="toc-text">Solutions</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Special-Constant-Number-EPSILON"><span class="toc-number">4.1.</span> <span class="toc-text">Special Constant: Number.EPSILON</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#toFixed"><span class="toc-number">4.2.</span> <span class="toc-text">toFixed()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Native-Implementation"><span class="toc-number">4.3.</span> <span class="toc-text">Native Implementation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Third-Party-Libraries"><span class="toc-number">4.4.</span> <span class="toc-text">Third-Party Libraries</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/undefined/" title="map_parseint">map_parseint</a><time datetime="2025-10-02T21:58:42.000Z" title="Created 2025-10-02 17:58:42">2025-10-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/jsbasic-handwriting/" title="JavaScript Basic - High-frequency handwriting"><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/image.9ddc96s40g.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JavaScript Basic - High-frequency handwriting"/></a><div class="content"><a class="title" href="/posts/jsbasic-handwriting/" title="JavaScript Basic - High-frequency handwriting">JavaScript Basic - High-frequency handwriting</a><time datetime="2021-07-10T01:10:53.000Z" title="Created 2021-07-09 21:10:53">2021-07-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/jsbasic-inherit/" title="JavaScript Basic - Inheritance"><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/image.2rvii9f6z2.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JavaScript Basic - Inheritance"/></a><div class="content"><a class="title" href="/posts/jsbasic-inherit/" title="JavaScript Basic - Inheritance">JavaScript Basic - Inheritance</a><time datetime="2021-07-09T01:10:53.000Z" title="Created 2021-07-08 21:10:53">2021-07-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/jsbasic-prototype/" title="JavaScript Basic - Re-understanding constructors, prototypes, prototype chains, and inheritance"><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/image.73ubpkycwk.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JavaScript Basic - Re-understanding constructors, prototypes, prototype chains, and inheritance"/></a><div class="content"><a class="title" href="/posts/jsbasic-prototype/" title="JavaScript Basic - Re-understanding constructors, prototypes, prototype chains, and inheritance">JavaScript Basic - Re-understanding constructors, prototypes, prototype chains, and inheritance</a><time datetime="2021-07-09T01:10:53.000Z" title="Created 2021-07-08 21:10:53">2021-07-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/0.1+0.2/" title="Why 0.1 + 0.2 != 0.3?"><img src="https://github.com/donnapersonal/picx-images-hosting/raw/master/image.6m494gp9dv.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Why 0.1 + 0.2 != 0.3?"/></a><div class="content"><a class="title" href="/posts/0.1+0.2/" title="Why 0.1 + 0.2 != 0.3?">Why 0.1 + 0.2 != 0.3?</a><time datetime="2021-05-17T01:35:51.000Z" title="Created 2021-05-16 21:35:51">2021-05-16</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2019 - 2025 By Donna Tang</span></div><div class="footer_custom_text">Hi, welcome to my blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script data-pjax src="/self/btf.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      false
        ? (usePjax ? pjax.loadUrl('/404') : window.location.href = '/404')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>